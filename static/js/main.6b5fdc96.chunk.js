(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{25:function(e,t,a){},28:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},32:function(e,t,a){e.exports=a(53)},40:function(e,t,a){},48:function(e,t){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),i=a(7),l=(a(40),a(25),a(10)),s=a(2),u=a(11),m=a.n(u),d=a(13),p=a(18),b=a(9),f=a(8);function E(e){return{type:"ADD_PLAYER_DATA",data:e}}function v(e){return{type:"ADD_TOKEN",token:e}}function g(e,t){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t+a).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log("Error: ",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return g("https://opentdb.com","/api_token.php?command=request")}function k(e){return g("https://opentdb.com","/api.php?amount=5&token=".concat(e))}var j=a(28),y=a.n(j);function w(){var e=r.a.useState({name:"",email:""}),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(i.b)(),o=Object(s.f)();function l(e){var t=e.target,r=t.name,c=t.value;n(Object(b.a)(Object(b.a)({},a),{},Object(p.a)({},r,c)))}function u(){return(u=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,n=t.token,c(v(n)),c(E(a)),o.push("/game");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{id:"main-div"},r.a.createElement("img",{id:"logo",src:y.a,alt:"Trivia Logo"}),r.a.createElement("form",{id:"form-login",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("label",{className:"label-login",htmlFor:"input-name"},r.a.createElement("input",{className:"input-login",name:"name",id:"input-name",type:"text","data-testid":"input-player-name",value:a.name,onChange:l,placeholder:"Name"})),r.a.createElement("label",{className:"label-login",htmlFor:"input-email"},r.a.createElement("input",{className:"input-login",name:"email",id:"input-email",type:"email","data-testid":"input-gravatar-email",value:a.email,onChange:l,placeholder:"Email"})),r.a.createElement("button",{className:"btn-login",id:"btn-play",type:"submit","data-testid":"btn-play",disabled:""===a.name||""===a.email,onClick:function(){return u.apply(this,arguments)}},"Play")))}var S=a(20),N=a.n(S);a(49);function x(){var e=Object(i.c)((function(e){return e})).player,t=e.gravatarEmail,a=e.name,n=e.score;return r.a.createElement("header",null,r.a.createElement("section",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(N()(t).toString()),alt:"avatar"}),r.a.createElement("p",{"data-testid":"header-player-name"},a)),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"header-score"},"score: ".concat(n," points"))))}a(50);function A(e){var t=e.shuffled,a=e.handleClick,n=e.answered;return r.a.createElement("div",{"data-testid":"answer-options"},t.map((function(e,t){var c=e.text,o=e.correct,i=e.id;return r.a.createElement("button",{onClick:function(){return a(o)},className:"question ".concat(n&&o&&"correct","\n              ").concat(n&&!o&&"incorrect"),"data-testid":o?"correct-answer":"wrong-answer-".concat(i),key:"".concat(c,":").concat(t),type:"button",disabled:n},c)})))}var D=a(21),T=function(e){return[{text:e.correct_answer,correct:!0}].concat(Object(D.a)(e.incorrect_answers.map((function(e){return{text:e,correct:!1}})))).sort((function(){return Math.random()-.5}))};function _(){var e,t,a=Object(n.useState)([]),c=Object(f.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)(0),p=Object(f.a)(u,2),b=p[0],E=p[1],g=Object(n.useState)([]),h=Object(f.a)(g,2),j=h[0],y=h[1],w=Object(n.useState)(!1),S=Object(f.a)(w,2),N=S[0],D=S[1],_=Object(n.useState)(30),C=Object(f.a)(_,2),R=C[0],I=C[1],P=Object(i.c)((function(e){return e})).token,q=Object(i.b)(),J=Object(s.f)();return Object(n.useEffect)((function(){var e=setTimeout((function(){I((function(e){return e-1}))}),1e3);return 0===R&&D(!0),N?clearTimeout(e):function(){return clearTimeout(e)}}),[N,R]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=13;break}return e.prev=1,e.next=4,k(P);case 4:t=e.sent,l(t.results),console.log(t.results),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a=O(),q(v(a));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}})()()}),[P,q]),Object(n.useEffect)((function(){o[b]&&y(T(o[b]))}),[o,b]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{className:"game-div"},r.a.createElement("p",{className:"p-game","data-testid":"question-category"},null===(e=o[b])||void 0===e?void 0:e.category),r.a.createElement("h3",{"data-testid":"question-text"},decodeURIComponent(null===(t=o[b])||void 0===t?void 0:t.question.replace(/&quot;/g,'"'))),r.a.createElement(A,{handleClick:function(e){D(!0);var t={hard:10+3*R,medium:10+2*R,easy:10+R};e&&(q({type:"UPDATE_ASSERTIONS"}),q({type:"UPDATE_SCORE",score:t[o[b].difficulty]}))},shuffled:j,answered:N}),N&&r.a.createElement("button",{onClick:function(){I(30),D(!1),E((function(e){return e+1})),b===o.length-1&&J.push("/feedback")},"data-testid":"btn-next",type:"button",className:"btn-next"},"Next"),r.a.createElement("h1",{className:"timer"},R)))}a(51);function C(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("ranking"));console.log(e),e&&c(e.sort((function(e,t){return t.score-e.score})))}),[]),r.a.createElement("div",{className:"div-ranking"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"div-ranking-line"},r.a.createElement("h4",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score,"   ----","pontos"))})),r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",type:"button",className:"btn-ranking"},"Go Home")))}a(52);function R(){var e=Object(i.c)((function(e){return e.player})),t=e.assertions,a=e.score,n=e.name,c=e.gravatarEmail,o={name:n,score:a,picture:"https://www.gravatar.com/avatar/".concat(N()(c).toString())},s=JSON.parse(localStorage.getItem("ranking"));return s?localStorage.setItem("ranking",JSON.stringify([].concat(Object(D.a)(s),[o]))):localStorage.setItem("ranking",JSON.stringify([o])),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{"data-testid":"feedback-text"},r.a.createElement("p",{"data-testid":"feedback-text"},t<3?"Could be better...":"Well Done!"),r.a.createElement("p",{className:"feedback -p"},"Sua pontua\xe7\xe3o total:",r.a.createElement("span",{"data-testid":"feedback-total-score"},a,r.a.createElement("span",null," pontos "))),r.a.createElement("p",{className:"feedback -p"},"Voce acertou um total de:",r.a.createElement("span",{"data-testid":"feedback-total-question"},t,r.a.createElement("span",null," perguntas "))),r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-play-again",type:"button",className:"btn-feedback"},"Play Again")),r.a.createElement(l.b,{to:"/ranking"},r.a.createElement("button",{"data-testid":"btn-ranking",type:"button",className:"btn-feedback"},"Ranking"))))}var I=function(){return r.a.createElement(l.a,{basename:"/humbertodutra.github.io/trybe-project-trivia"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:w}),r.a.createElement(s.a,{path:"/game",component:_}),r.a.createElement(s.a,{path:"/ranking",component:C}),r.a.createElement(s.a,{path:"/feedback",component:R})))};function P(){return r.a.createElement(I,null)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(14),J=a(30),U=a(31),F={name:"",assertions:0,score:0,gravatarEmail:""};var W=Object(q.combineReducers)({token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOKEN":return t.token;default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAYER_DATA":return Object(b.a)(Object(b.a)({},e),{},{name:t.data.name,gravatarEmail:t.data.email,assertions:0,score:0});case"UPDATE_SCORE":return Object(b.a)(Object(b.a)({},e),{},{score:t.score});case"UPDATE_ASSERTIONS":return Object(b.a)(Object(b.a)({},e),{},{assertions:e.assertions+1});default:return e}}}),L=Object(q.createStore)(W,Object(J.composeWithDevTools)(Object(q.applyMiddleware)(U.a)));window.Cypress&&(window.store=L);var B=L;o.a.render(r.a.createElement(i.a,{store:B},r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.6b5fdc96.chunk.js.map